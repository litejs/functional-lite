!function(q){function l(a){if(l[a])return l[a];for(var b="_",c=a,d=a.split("->");1<d.length;)c=d.pop(),b=d.pop().match(/\w+/g)||"",d.length&&d.push("(function("+b+"){return("+c+")})");return l[a]=new Function(b,"return("+c+")")}var k=Array.prototype,f=Function.prototype,n=String.prototype,g=Object,m=f.call.bind(k.slice),p=[];f.construct=function(a){var b=a.length;return b?(p[b]||(p[b]=l("t a->new t(a["+g.keys(m(a)).join("],a[")+"])")))(this,a):new this};f.partial=function(){var a=this,b=m(arguments);
return function(){return a.apply(this,b.concat.apply(b,arguments))}};f.byWords=function(a){var b=this;a|=0;return function(){var c=this,d=c,e=arguments;(e[a]||"").replace(/[-\w]+/g,function(h){e[a]=h;d=b.apply(c,e)});return d}};f.byKeyVal=function(){var a=this;return function(b){var c,d=m(arguments);if("object"==typeof b)for(c in b)d[0]=c,d[1]=b[c],c=a.apply(this,d);else c=a.apply(this,d);return c}};f.cache=function(a,b,c){var d=this,e=c||{},h=function(){var c=arguments,g=!!a||this instanceof h,f=
b?b.apply(d,c):g+":"+c.length+":"+m(c);return f in e?e[f]:e[f]=g?d.construct(c):d.apply(this,c)};h.origin=d;h.cached=e;h.extend=function(){return d.extend.apply(d,arguments).cache(a,b,c)};h.prototype=d.prototype;return h};f.extend=function(){var a,b=this,c=0,d=function(){return b.apply(this,arguments)};d.prototype=g.create(b.prototype);for(d.prototype.constructor=d;a=arguments[c++];)g.merge(d.prototype,a);return d};f.ttl=function(a,b){var c=this,d=setTimeout(function(){a=0;b&&b()},a);return function(){clearTimeout(d);
a&&c.apply(null,arguments)}};f.once=function(a){var b,c,d=this;return function(){clearTimeout(b);c=arguments;b=setTimeout(function(){d.apply(null,c)},a)}};f.rate=function(a,b){var c,d,e=this,h=0;return function(){var g=+new Date;clearTimeout(c);g>h?(h=g+a,e.apply(null,arguments)):b&&(d=arguments,c=setTimeout(function(){e.apply(null,d)},h-g))}};g.each=function(a,b,c,d){if(a)for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)};g.merge=function(a,b){for(var c,d=1;b=arguments[d++];)for(c in b)b.hasOwnProperty(c)&&
(a[c]=b[c]);return a};g.clone=function(a,b,c){if(a&&a.constructor===g){b={};for(c in a)a.hasOwnProperty(c)&&(b[c]=g.clone(a[c]));a=b}return a};g.deepMerge=g.deepCopy=function(a,b,c,d,e,h){c=c||"";d=d||[];for(e in b)if(b.hasOwnProperty(e)&&a[e]!==b[e])if(h=b[e],d.push(c+e),null===h)delete a[e];else{var f;if(f=h&&h.constructor===g)f=(f=a[e])&&f.constructor===g;f?g.deepMerge(a[e],h,c+e+".",d):a[e]=h}return d};g.zip=function(a,b){return a.fold(function(a,d,e){a[d]=b[e];return a},{})};k.remove=function(){for(var a=
this.length,b=m(arguments),c=-1;a--;)~b.indexOf(this[a])&&this.splice(c=a,1);return c};k.each=k.forEach;k.fold=k.reduce;k.foldr=k.reduceRight;k.unique=k.filter.partial(function(a,b,c){return b==c.lastIndexOf(a)});!function(a){f[a]=n[a]=function(){var b=arguments,c=b[0];b[0]=this.fn();return k[a].apply(c,b)}}.byWords()("every filter each map fold foldr some");f.fn=function(){return this};n.fn=function(){return l(this)};q.Fn=l}(this);